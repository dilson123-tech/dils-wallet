name: üö¶ Smoke Test (Production)

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  check-prod-health:
    runs-on: ubuntu-latest
    steps:
      - name: üöÄ Testar health endpoint em produ√ß√£o
        run: |
          BASE="https://dils-wallet-production.up.railway.app"
          echo "Testando \$BASE/api/v1/health..."
          HTTP_CODE=$(curl -s -o /tmp/out.json -w "%{http_code}" "$BASE/api/v1/health")
          cat /tmp/out.json
          if [ "$HTTP_CODE" != "200" ]; then
            echo "‚ùå Falha: API retornou c√≥digo \$HTTP_CODE"
            exit 1
          fi
          echo "‚úÖ Smoke test aprovado!"
