name: notify-canary (workflow_run)

on:
  workflow_run:
    workflows:
      - "CI â€” dils-wallet"
      - "smoke-pix"
      - "health-prod"
      - "Smoke Prod"
      - "Smoke - PIX Idempotency"
    types: [completed]

jobs:
  call:
    if: ${{ github.event.workflow_run.head_branch == 'main' }}
    uses: ./.github/workflows/notify_reusable.yml
    with:
      trigger_workflow: ${{ github.event.workflow_run.name }}
      status: ${{ github.event.workflow_run.status }}
      conclusion: ${{ github.event.workflow_run.conclusion }}
      html_url: ${{ github.event.workflow_run.html_url }}
      head_branch: ${{ github.event.workflow_run.head_branch }}
      head_sha: ${{ github.event.workflow_run.head_sha }}
