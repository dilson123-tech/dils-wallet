#!/bin/bash
set -e

inicio=$(date +%s)
msg="${1:-deploy rรกpido backend}"

echo -e "\033[1;34mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\033[0m"
echo -e "\033[1;33m๐ Deploy Aurea Bank Backend (dils-wallet2):\033[0m"
echo -e "\033[1;37mMensagem: '$msg'\033[0m"
echo -e "\033[1;34mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\033[0m"

git add -A
git commit -m "$msg" || echo "Nenhuma mudanรงa para commitar"
git push origin main

echo -e "\033[1;36m๐ฆ Subindo para Railway (dils-wallet2)...\033[0m"
railway up --service dils-wallet2

fim=$(date +%s)
duracao=$((fim - inicio))
min=$((duracao / 60)); seg=$((duracao % 60))

echo -e "\033[1;34mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\033[0m"
echo -e "\033[1;32mโ Backend no ar!\033[0m"
echo -e "\033[1;37mโฑ๏ธ Tempo total: ${min}m ${seg}s\033[0m"
echo -e "\033[1;34mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\033[0m"
